$.component("coral.radio",$.coral.formelement,{version:"4.0.1",castProperties:["triggers"],options:{showStar:true,id:null,name:null,width:"auto",height:24,label:"",starBefore:false,labelField:null,disabled:false,readonly:false,allowCancel:false,checked:false,required:false,isCheck:false,value:"",errMsg:null,errMsgPosition:"leftBottom",onValidError:null,onValidSuccess:null,onClick:null,onKeyDown:null,onChange:$.noop,triggers:null,excluded:false},_create:function(){var c=this,b=this.options;if(!c.element.jquery){c.element=$(c.element)}c.element.addClass("coral-form-element-radio tabbable");c.element.addClass("coral-validation-radio");typeof c.element.attr("id")=="undefined"&&!!c.options.id&&c.element.attr("id",c.options.id);c.options.id=c.element.uniqueId().attr("id");var a=c.element.attr("name");typeof a!="undefined"?(c.options.name=a):(c.element.attr("name",c.options.name));if($.trim(c.element.val())!=""&&$.trim(c.element.val())!="on"){c.options.value=c.element.val()}else{if(c.options.value){c.element.val(c.options.value)}}c.nameMark="coral-radio-element-"+c._hashCode(c.options.name);c.element.addClass(c.nameMark);c.uiRadio=$('<span class="coral-radio"></span>');c.uiLabel=$('<label class="coral-radio-label" for='+c.options.id+"></label>");c.uiIcon=$('<span class="coral-radio-icon"></span>');c.uiLabel.append(c.uiIcon);if(c.options.label){c.uiLabel.append(c.options.label)}if(c.options.checked){c._getRadios().not(c.element).radio("uncheck");c.uiIcon.addClass("cui-icon-radio-checked coral-radio-hightlight");c.element.prop("checked",true)}else{c.uiIcon.addClass("cui-icon-radio-unchecked");c.element.prop("checked",false)}c.element.after(c.uiRadio);c.uiRadio.append(c.element).append(c.uiLabel);if(b.labelField){this.uiLabelField=$('<label class="coral-label">'+b.labelField+"</label>");this.uiRadio.prepend(this.uiLabelField);this.uiRadio.addClass("coral-hasLabel")}if((c.element)[0].checked===true){c.originalValue=this.getValue()}c._bindEvent()},reset:function(){if(this.originalValue==="off"||this.originalValue===""){this.uncheck()
}else{this.check()}},_getRadios:function(){var b=this,a=b.element.closest("form");if(a.length>0){return a.find($("."+b.nameMark))}else{return $("."+b.nameMark)}},_setDisabled:function(a){if(a){this.element.prop("disabled",true);this.uiRadio.addClass("coral-state-disabled")}else{this.element.prop("disabled",false);this.uiRadio.removeClass("coral-state-disabled")}this.options.disabled=(a?true:false)},_setReadonly:function(a){if(a){this.element.prop("reaonly",true);this.uiRadio.addClass("coral-readonly")}else{this.element.prop("readonly",false);this.uiRadio.removeClass("coral-state-readonly")}this.options.readonly=!!a},focus:function(){var a=this;if(this.options.disabled||this.options.readonly){return false}this.element.focus();return true},_bindEvent:function(){var b=this;if(this.options.disabled){this._setDisabled(this.options.disabled)}var a;this.element.bind("focus",function(){b.uiRadio.addClass("coral-radio-highlight")}).bind("blur",function(){b.uiRadio.removeClass("coral-radio-highlight")}).bind("click",function(c){if(b.options.disabled){return}if(a){a=false;return}b._clearCheckedState();b.uiIcon.removeClass("cui-icon-radio-unchecked");b.uiIcon.addClass("cui-icon-radio-checked coral-radio-hightlight");b._trigger("onChange",null,[{checked:!!b.element.prop("checked")}]);b._trigger("onClick",null,{checked:!!b.element.prop("checked")})}).bind("keydown"+this.eventNamespace,function(d){if(b.options.allowCancel){var c=$.coral.keyCode;switch(d.keyCode){case c.SPACE:d.preventDefault();b._selectItem(d);break}}b._trigger("onKeyDown",d,{})});this.uiRadio.bind("mouseenter"+this.eventNamespace,function(){if(b.options.disabled){return}$(this).addClass("coral-radio-hover")}).bind("mouseleave"+this.eventNamespace,function(){if(b.options.disabled){return}$(this).removeClass("coral-radio-hover")});this.uiLabel.bind("click",function(c){b._selectItem(c)})},_selectItem:function(b){var a=this;if(a.options.readonly||a.options.disabled){return false}suppressClick=true;a.options.isCheck=$(a.element).prop("checked");
if(!a.options.isCheck){a._clearCheckedState();a.uiIcon.removeClass("cui-icon-radio-unchecked");a.uiIcon.addClass("cui-icon-radio-checked");a.element.prop("checked",true);a._trigger("onChange",null,[{checked:!!a.element.prop("checked")}])}else{if(!a.options.allowCancel){return}a._clearCheckedState();a.uiIcon.addClass("cui-icon-radio-unchecked");a.element.prop("checked",false);a._trigger("onChange",null,[{checked:!!a.element.prop("checked")}])}},clear:function(){},_clearCheckedState:function(){this._getRadios().each(function(){$(this).radio("component").find(".coral-radio-icon").removeClass("cui-icon-radio-checked coral-radio-hightlight").addClass(" cui-icon-radio-unchecked")})},_hashCode:function(e){if(!e){return 0}e=""+e;var c=0,d=0,a=e.length;for(var b=0;b<a;b++){c=31*c+e.charCodeAt(d++);if(c>2147483647||c<2147483648){c=c&4294967295}}return c},_setOption:function(a,b){if(a==="id"||a==="name"){return}if(a==="readonly"){this._setReadonly(b)}if(a==="disabled"){this._setDisabled(b)}this._super(a,b)},_destroy:function(){this.uiRadio.replaceWith(this.element);this.uncheck();this.element.removeClass("coral-form-element-radio");this.element.removeClass("coral-validation-radio");this.element.removeClass(this.nameMark)},component:function(){return this.uiRadio},disable:function(){this._setDisabled(true)},enable:function(){this._setDisabled(false)},show:function(){this.component().show()},hide:function(){this.component().hide()},check:function(){var a=this;if(this.uiIcon.hasClass("cui-icon-radio-unchecked")){a._getRadios().each(function(){$(this).radio("component").find(".coral-radio-icon").removeClass("cui-icon-radio-checked coral-radio-hightlight").addClass(" cui-icon-radio-unchecked")});this.uiIcon.removeClass("cui-icon-radio-unchecked").addClass("cui-icon-radio-checked coral-radio-hightlight");this.element.prop("checked",true)}},uncheck:function(){if(this.uiIcon.hasClass("coral-radio-hightlight")){this.uiIcon.removeClass("cui-icon-radio-checked coral-radio-hightlight").addClass("cui-icon-radio-unchecked");
this.element.prop("checked",false)}},isChecked:function(){return this.element.prop("checked")},setValue:function(a){if("on"===a){this.check()}else{this.uncheck()}},getValue:function(){return this.getValues().join(",")},getValues:function(){var b=this,a=[];b._getRadios().each(function(){var c=$(this);if(c.radio("isChecked")){a.push(c.val())}});return a},refresh:function(){this._destroy();this._create()}});