/*!
 * jQuery coral Resizable 4.0.1
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.component.js
 */
(function(){function b(d){return parseInt(d,10)||0}function a(d){return !isNaN(parseInt(d,10))}function c(g,e){if($(g).css("overflow")==="hidden"){return false}var d=(e&&e==="left")?"scrollLeft":"scrollTop",f=false;if(g[d]>0){return true}g[d]=1;f=(g[d]>0);g[d]=0;return f}$.component("coral.resizable",$.coral.mouse,{version:"4.0.1",componentEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,layout:false,helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var k,e,h,f,d,g=this,j=this.options;this.element.addClass("coral-resizable");$.extend(this,{_aspectRatio:!!(j.aspectRatio),aspectRatio:j.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:j.helper||j.ghost||j.animate?j.helper||"coral-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap($("<div class='coral-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("coral-resizable",this.element.data("coral-resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));
this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=j.handles||(!$(".coral-resizable-handle",this.element).length?"e,s,se":{n:".coral-resizable-n",e:".coral-resizable-e",s:".coral-resizable-s",w:".coral-resizable-w",se:".coral-resizable-se",sw:".coral-resizable-sw",ne:".coral-resizable-ne",nw:".coral-resizable-nw"});if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}k=this.handles.split(",");this.handles={};for(e=0;e<k.length;e++){h=$.trim(k[e]);d="coral-resizable-"+h;f=$("<div class='coral-resizable-handle "+d+"'></div>");f.css({zIndex:j.zIndex});if("se"===h){f.addClass("coral-icon coral-icon-gripsmall-diagonal-se")}this.handles[h]=".coral-resizable-"+h;this.element.append(f)}}this._renderAxis=function(p){var m,n,l,o;p=p||this.element;for(m in this.handles){if(this.handles[m].constructor===String){this.handles[m]=this.element.children(this.handles[m]).first().show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){n=$(this.handles[m],this.element);o=/sw|ne|nw|se|n|s/.test(m)?n.outerHeight():n.outerWidth();l=["padding",/ne|nw|n/.test(m)?"Top":/se|sw|s/.test(m)?"Bottom":/^e$/.test(m)?"Right":"Left"].join("");p.css(l,o);this._proportionallyResize()}if(!$(this.handles[m]).length){continue}}};this._renderAxis(this.element);this._handles=$(".coral-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!g.resizing){if(this.className){f=this.className.match(/coral-resizable-(se|sw|ne|nw|n|e|s|w)/i)}g.axis=f&&f[1]?f[1]:"se"}});if(j.autoHide){this._handles.hide();$(this.element).addClass("coral-resizable-autohide").mouseenter(function(){if(j.disabled){return}$(this).removeClass("coral-resizable-autohide");g._handles.show()}).mouseleave(function(){if(j.disabled){return}if(!g.resizing){$(this).addClass("coral-resizable-autohide");g._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();
var e,d=function(f){$(f).removeClass("coral-resizable coral-resizable-disabled coral-resizable-resizing").removeData("resizable").removeData("coral-resizable").unbind(".resizable").find(".coral-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);e=this.element;this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e);e.remove()}this.originalElement.css("resize",this.originalResizeStyle);d(this.originalElement);return this},_mouseCapture:function(f){var e,g,d=false;for(e in this.handles){g=$(this.handles[e])[0];if(g===f.target||$.contains(g,f.target)){d=true}}return !this.options.disabled&&d},_mouseStart:function(e){var i,f,h,g=this.options,d=this.element;this.resizing=true;this._renderProxy();i=b(this.helper.css("left"));f=b(this.helper.css("top"));if(g.containment){i+=$(g.containment).scrollLeft()||0;f+=$(g.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:i,top:f};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:i,top:f};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:e.pageX,top:e.pageY};this.aspectRatio=(typeof g.aspectRatio==="number")?g.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);h=$(".coral-resizable-"+this.axis).css("cursor");$("body").css("cursor",h==="auto"?this.axis+"-resize":h);d.addClass("coral-resizable-resizing");this._propagate("start",e);return true},_mouseDrag:function(i){var j,h,k=this.originalMousePosition,e=this.axis,f=(i.pageX-k.left)||0,d=(i.pageY-k.top)||0,g=this._change[e];this._updatePrevProperties();if(!g){return false}j=g.apply(this,[i,f,d]);this._updateVirtualBoundaries(i.shiftKey);if(this._aspectRatio||i.shiftKey){j=this._updateRatio(j,i)
}j=this._respectSize(j,i);this._updateCache(j);this._propagate("resize",i);h=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!$.isEmptyObject(h)){this._updatePrevProperties();this._trigger("resize",i,this.ui());this._applyChanges()}return false},_mouseStop:function(g){this.resizing=false;var f,d,e,j,m,i,l,h=this.options,k=this;if(this._helper){f=this._proportionallyResizeElements;d=f.length&&(/textarea/i).test(f[0].nodeName);e=d&&c(f[0],"left")?0:k.sizeDiff.height;j=d?0:k.sizeDiff.width;m={width:(k.helper.width()-j),height:(k.helper.height()-e)};i=(parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left))||null;l=(parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top))||null;if(!h.animate){this.element.css($.extend(m,{top:l,left:i}))}k.helper.height(k.size.height);k.helper.width(k.size.width);if(this._helper&&!h.animate){this._proportionallyResize()}}$("body").css("cursor","auto");this.element.removeClass("coral-resizable-resizing");this._propagate("stop",g,this.ui());if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var d={};if(this.position.top!==this.prevPosition.top){d.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){d.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){d.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){d.height=this.size.height+"px"}this.helper.css(d);return d},_updateVirtualBoundaries:function(f){var h,g,e,j,d,i=this.options;d={minWidth:a(i.minWidth)?i.minWidth:0,maxWidth:a(i.maxWidth)?i.maxWidth:Infinity,minHeight:a(i.minHeight)?i.minHeight:0,maxHeight:a(i.maxHeight)?i.maxHeight:Infinity};if(this._aspectRatio||f){h=d.minHeight*this.aspectRatio;e=d.minWidth/this.aspectRatio;g=d.maxHeight*this.aspectRatio;
j=d.maxWidth/this.aspectRatio;if(h>d.minWidth){d.minWidth=h}if(e>d.minHeight){d.minHeight=e}if(g<d.maxWidth){d.maxWidth=g}if(j<d.maxHeight){d.maxHeight=j}}this._vBoundaries=d},_updateCache:function(d){this.offset=this.helper.offset();if(a(d.left)){this.position.left=d.left}if(a(d.top)){this.position.top=d.top}if(a(d.height)){this.size.height=d.height}if(a(d.width)){this.size.width=d.width}},_updateRatio:function(f){var g=this.position,e=this.size,d=this.axis;if(a(f.height)){f.width=(f.height*this.aspectRatio)}else{if(a(f.width)){f.height=(f.width/this.aspectRatio)}}if(d==="sw"){f.left=g.left+(e.width-f.width);f.top=null}if(d==="nw"){f.top=g.top+(e.height-f.height);f.left=g.left+(e.width-f.width)}return f},_respectSize:function(i){var f=this._vBoundaries,l=this.axis,n=a(i.width)&&f.maxWidth&&(f.maxWidth<i.width),j=a(i.height)&&f.maxHeight&&(f.maxHeight<i.height),g=a(i.width)&&f.minWidth&&(f.minWidth>i.width),m=a(i.height)&&f.minHeight&&(f.minHeight>i.height),e=this.originalPosition.left+this.originalSize.width,k=this.position.top+this.size.height,h=/sw|nw|w/.test(l),d=/nw|ne|n/.test(l);if(g){i.width=f.minWidth}if(m){i.height=f.minHeight}if(n){i.width=f.maxWidth}if(j){i.height=f.maxHeight}if(g&&h){i.left=e-f.minWidth}if(n&&h){i.left=e-f.maxWidth}if(m&&d){i.top=k-f.minHeight}if(j&&d){i.top=k-f.maxHeight}if(!i.width&&!i.height&&!i.left&&i.top){i.top=null}else{if(!i.width&&!i.height&&!i.top&&i.left){i.left=null}}return i},_getPaddingPlusBorderDimensions:function(f){var e=0,g=[],h=[f.css("borderTopWidth"),f.css("borderRightWidth"),f.css("borderBottomWidth"),f.css("borderLeftWidth")],d=[f.css("paddingTop"),f.css("paddingRight"),f.css("paddingBottom"),f.css("paddingLeft")];for(;e<4;e++){g[e]=(parseInt(h[e],10)||0);g[e]+=(parseInt(d[e],10)||0)}return{height:g[0]+g[2],width:g[1]+g[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var f,e=0,d=this.helper||this.element;for(;e<this._proportionallyResizeElements.length;e++){f=this._proportionallyResizeElements[e];
if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(f)}f.css({height:(d.height()-this.outerDimensions.height)||0,width:(d.width()-this.outerDimensions.width)||0})}},_renderProxy:function(){var d=this.element,e=this.options;this.elementOffset=d.offset();if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(e,d){return{width:this.originalSize.width+d}},w:function(f,d){var e=this.originalSize,g=this.originalPosition;return{left:g.left+d,width:e.width-d}},n:function(g,e,d){var f=this.originalSize,h=this.originalPosition;return{top:h.top+d,height:f.height-d}},s:function(f,e,d){return{height:this.originalSize.height+d}},se:function(f,e,d){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[f,e,d]))},sw:function(f,e,d){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,e,d]))},ne:function(f,e,d){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,e,d]))},nw:function(f,e,d){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[f,e,d]))}},_propagate:function(e,d){$.coral.plugin.call(this,e,[d,this.ui()]);(e!=="resize"&&this._trigger(e,d,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});$.coral.plugin.add("resizable","animate",{stop:function(g){var l=$(this).data("coral-resizable"),i=l.options,f=l._proportionallyResizeElements,d=f.length&&(/textarea/i).test(f[0].nodeName),e=d&&c(f[0],"left")?0:l.sizeDiff.height,k=d?0:l.sizeDiff.width,h={width:(l.size.width-k),height:(l.size.height-e)},j=(parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left))||null,m=(parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top))||null;
l.element.animate($.extend(h,m&&j?{top:m,left:j}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(l.element.css("width"),10),height:parseInt(l.element.css("height"),10),top:parseInt(l.element.css("top"),10),left:parseInt(l.element.css("left"),10)};if(f&&f.length){$(f[0]).css({width:n.width,height:n.height})}l._updateCache(n);l._propagate("resize",g)}})}});$.coral.plugin.add("resizable","containment",{start:function(){var l,f,n,d,k,g,q,m=$(this).data("coral-resizable"),j=m.options,i=m.element,e=j.containment,h=(e instanceof $)?e.get(0):(/parent/.test(e))?i.parent().get(0):e;if(!h){return}m.containerElement=$(h);if(/document/.test(e)||e===document){m.containerOffset={left:0,top:0};m.containerPosition={left:0,top:0};m.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}}else{l=$(h);f=[];$(["Top","Right","Left","Bottom"]).each(function(p,o){f[p]=b(l.css("padding"+o))});m.containerOffset=l.offset();m.containerPosition=l.position();m.containerSize={height:(l.innerHeight()-f[3]),width:(l.innerWidth()-f[1])};n=m.containerOffset;d=m.containerSize.height;k=m.containerSize.width;g=(c(h,"left")?h.scrollWidth:k);q=(c(h)?h.scrollHeight:d);m.parentData={element:h,left:n.left,top:n.top,width:g,height:q}}},resize:function(e){var k,q,j,h,l=$(this).resizable("instance"),g=l.options,n=l.containerOffset,m=l.position,p=l._aspectRatio||e.shiftKey,d={top:0,left:0},f=l.containerElement,i=true;if(f[0]!==document&&(/static/).test(f.css("position"))){d=n}if(m.left<(l._helper?n.left:0)){l.size.width=l.size.width+(l._helper?(l.position.left-n.left):(l.position.left-d.left));if(p){l.size.height=l.size.width/l.aspectRatio;i=false}l.position.left=g.helper?n.left:0}if(m.top<(l._helper?n.top:0)){l.size.height=l.size.height+(l._helper?(l.position.top-n.top):l.position.top);if(p){l.size.width=l.size.height*l.aspectRatio;i=false}l.position.top=l._helper?n.top:0}j=l.containerElement.get(0)===l.element.parent().get(0);
h=/relative|absolute/.test(l.containerElement.css("position"));if(j&&h){l.offset.left=l.parentData.left+l.position.left;l.offset.top=l.parentData.top+l.position.top}else{l.offset.left=l.element.offset().left;l.offset.top=l.element.offset().top}k=Math.abs(l.sizeDiff.width+(l._helper?l.offset.left-d.left:(l.offset.left-n.left)));q=Math.abs(l.sizeDiff.height+(l._helper?l.offset.top-d.top:(l.offset.top-n.top)));if(k+l.size.width>=l.parentData.width){l.size.width=l.parentData.width-k;if(p){l.size.height=l.size.width/l.aspectRatio;i=false}}if(q+l.size.height>=l.parentData.height){l.size.height=l.parentData.height-q;if(p){l.size.width=l.size.height*l.aspectRatio;i=false}}if(!i){l.position.left=l.prevPosition.left;l.position.top=l.prevPosition.top;l.size.width=l.prevSize.width;l.size.height=l.prevSize.height}},stop:function(){var j=$(this).resizable("instance"),e=j.options,k=j.containerOffset,d=j.containerPosition,f=j.containerElement,g=$(j.helper),m=g.offset(),l=g.outerWidth()-j.sizeDiff.width,i=g.outerHeight()-j.sizeDiff.height;if(j._helper&&!e.animate&&(/relative/).test(f.css("position"))){$(this).css({left:m.left-d.left-k.left,width:l,height:i})}if(j._helper&&!e.animate&&(/static/).test(f.css("position"))){$(this).css({left:m.left-d.left-k.left,width:l,height:i})}}});$.coral.plugin.add("resizable","alsoResize",{start:function(){var d=$(this).data("coral-resizable"),f=d.options,e=function(g){$(g).each(function(){var h=$(this);h.data("coral-resizable-alsoresize",{width:parseInt(h.width(),10),height:parseInt(h.height(),10),left:parseInt(h.css("left"),10),top:parseInt(h.css("top"),10)})})};if(typeof(f.alsoResize)==="object"&&!f.alsoResize.parentNode){if(f.alsoResize.length){f.alsoResize=f.alsoResize[0];e(f.alsoResize)}else{$.each(f.alsoResize,function(g){e(g)})}}else{e(f.alsoResize)}},resize:function(f,h){var e=$(this).data("coral-resizable"),i=e.options,g=e.originalSize,k=e.originalPosition,j={height:(e.size.height-g.height)||0,width:(e.size.width-g.width)||0,top:(e.position.top-k.top)||0,left:(e.position.left-k.left)||0},d=function(l,m){$(l).each(function(){var p=$(this),s=$(this).data("coral-resizable-alsoresize"),o={},n=m&&m.length?m:p.parents(h.originalElement[0]).length?["width","height"]:["width","height","top","left"];
var q=$.coral.getStyles(p[0]);var r=jQuery.support.boxSizing&&jQuery.css(p,"boxSizing",false,q)==="border-box";$.each(n,function(t,v){var u=(s[v]||0)+(j[v]||0);if(u&&u>=0){if(r){if($.inArray(v,["width","height"])>=0){p[v](u)}else{p.css(v,u)}}else{o[v]=u||null}}});p.css(o)})};if(typeof(i.alsoResize)==="object"&&!i.alsoResize.nodeType){$.each(i.alsoResize,function(l,m){d(l,m)})}else{d(i.alsoResize)}},stop:function(){$(this).removeData("resizable-alsoresize")}});$.coral.plugin.add("resizable","ghost",{start:function(){var e=$(this).data("coral-resizable"),f=e.options,d=e.size;e.ghost=e.originalElement.clone();e.ghost.css({opacity:0.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("coral-resizable-ghost").addClass(typeof f.ghost==="string"?f.ghost:"");e.ghost.appendTo(e.helper)},resize:function(){var d=$(this).data("coral-resizable");if(d.ghost){d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})}},stop:function(){var d=$(this).data("coral-resizable");if(d.ghost&&d.helper){d.helper.get(0).removeChild(d.ghost.get(0))}}});$.coral.plugin.add("resizable","grid",{resize:function(){var g,l=$(this).resizable("instance"),q=l.options,j=l.size,k=l.originalSize,m=l.originalPosition,v=l.axis,d=typeof q.grid==="number"?[q.grid,q.grid]:q.grid,t=(d[0]||1),s=(d[1]||1),i=Math.round((j.width-k.width)/t)*t,h=Math.round((j.height-k.height)/s)*s,n=k.width+i,r=k.height+h,f=q.maxWidth&&(q.maxWidth<n),p=q.maxHeight&&(q.maxHeight<r),u=q.minWidth&&(q.minWidth>n),e=q.minHeight&&(q.minHeight>r);q.grid=d;if(u){n+=t}if(e){r+=s}if(f){n-=t}if(p){r-=s}if(/^(se|s|e)$/.test(v)){l.size.width=n;l.size.height=r}else{if(/^(ne)$/.test(v)){l.size.width=n;l.size.height=r;l.position.top=m.top-h}else{if(/^(sw)$/.test(v)){l.size.width=n;l.size.height=r;l.position.left=m.left-i}else{if(r-s<=0||n-t<=0){g=l._getPaddingPlusBorderDimensions(this)}if(r-s>0){l.size.height=r;l.position.top=m.top-h}else{r=s-g.height;l.size.height=r;l.position.top=m.top+k.height-r
}if(n-t>0){l.size.width=n;l.position.left=m.left-i}else{n=s-g.height;l.size.width=n;l.position.left=m.left+k.width-n}}}}}})})();