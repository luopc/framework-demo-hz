(function(){var c="loading",d={position:"overlay",text:"",loadingIcon:"coral-icon-loading",tpl:'<span class="loading-wrapper {wrapper}">{text}<span class="{loadingIcon}"></span></span>',disableSource:false,disableOthers:[]};function b(g,f){this.element=g;this.options=$.extend({},d,f);this._defaults=d;this._name=c;this._loader=null;this.init()}function a(){if(!$[c]){$.loading=function(f){$("body").loading(f)}}}b.prototype={init:function(){if($(this.element).is("body")){this.options.position="overlay"}this.show()},show:function(){var h=this,i=h.options.tpl.replace("{wrapper}"," loading-show ");i=i.replace("{loadingIcon}",h.options.loadingIcon);i=i.replace("{text}",(h.options.text!=="")?h.options.text+" ":"");h._loader=$(i);if($(h.element).is("input, textarea")&&true===h.options.disableSource){$(h.element).attr("disabled","disabled")}else{if(true===h.options.disableSource){$(h.element).addClass("disabled")}}switch(h.options.position){case"inside":$(h.element).append(h._loader);break;case"overlay":var g=null;if($(h.element).is("body")){g=$('<div class="coral-loading" style="position:fixed; left:0; top:0; z-index: 10001; width: 100%; height: '+$(window).height()+'px;" />');g.prepend("<div class ='coral-component-overlay'/>");$("body").prepend(g)}else{var k=$(h.element).css("position"),l={},f=$(h.element).outerHeight()+"px",j="100%";if("relative"===k||"absolute"===k){l={top:0,left:0}}else{l=$(h.element).position()}g=$('<div class="coral-loading" style="position:absolute; top: '+l.top+"px; left: "+l.left+"px; z-index: 10000; width: "+j+"; height: "+f+';" />');g.prepend("<div style='position:absolute;width:100%;height:100%;'><div class ='coral-component-overlay'style='position:relative;'></div></div>");$(h.element).prepend(g)}g.append(h._loader);h._loader.css({top:(g.outerHeight()/2-h._loader.outerHeight()/2)+"px"});break;default:$(h.element).after(h._loader);break}h.disableOthers()},refresh:function(){var g=null,h=this,j=$(h.element).css("position"),k={},f=$(h.element).outerHeight()+"px",i="100%";
if("relative"===j||"absolute"===j){k={top:0,left:0}}else{k=$(h.element).position()}g=$(h.element).find(".coral-loading");g.css({top:k.top,left:k.left,width:i,height:f});h._loader.css({top:(g.outerHeight()/2-h._loader.outerHeight()/2)+"px"})},hide:function(){if("overlay"===this.options.position){$(this.element).find(".coral-loading").first().remove()}else{$(this._loader).remove();$(this.element).text($(this.element).attr("data-loading-label"))}$(this.element).removeAttr("disabled").removeClass("disabled");this.enableOthers()},disableOthers:function(){$.each(this.options.disableOthers,function(g,h){var f=$(h);if(f.is("button, input, textarea")){f.attr("disabled","disabled")}else{f.addClass("disabled")}})},enableOthers:function(){$.each(this.options.disableOthers,function(g,h){var f=$(h);if(f.is("button, input, textarea")){f.removeAttr("disabled")}else{f.removeClass("disabled")}})}};var e=Array.prototype.slice;$.fn[c]=function(h){var i=this,g=e.call(arguments,1),f=typeof h==="string";return this.each(function(){if(f){if($.data(this,"plugin_"+c)){var k,j=$.data(this,"plugin_"+c);if(!$.isFunction(j[h])||h.charAt(0)==="_"){return $.error("no such method '"+h+"' for "+name+" component instance")}k=j[h].apply(j,g);if(k!==j&&k!==undefined){i=k&&k.jquery?i.pushStack(k.get()):k;return false}}}else{$.data(this,"plugin_"+c,new b(this,h))}})};a()})();