/*!
 * jQuery UI Spinner 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 */
function spinner_modifier(a){return function(){var b=this.element.val();a.apply(this,arguments);this._refresh();if(b!==this.element.val()){this._trigger("onChange")}}}var spinner=$.component("coral.spinner",$.coral.formelement,{version:"4.0.3",castProperties:["triggers"],defaultElement:"<input>",componentEventPrefix:"spin",options:{culture:null,icons:{down:"cui-icon-arrow-down3",up:"cui-icon-arrow-up3"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,onChange:null,onSpin:null,onStart:null,onStop:null,triggers:null,excluded:false},_create:function(){if(typeof this.element.attr("id")!="undefined"){this.options.id=this.element.attr("id")}else{if(this.options.id){this.element.attr("id",this.options.id)}}if(typeof this.element.attr("name")!="undefined"){this.options.name=this.element.attr("name")}else{if(this.options.name){this.element.attr("name",this.options.name)}}if(typeof this.element.attr("value")!="undefined"){this.options.value=this.element.attr("value")}this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);if(this.value()!==""){this._value(this.element.val(),true)}this.originalValue=this.getValue();this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var a={},b=this.element;$.each(["min","max","step"],function(c,d){var e=b.attr(d);if(e!==undefined&&e.length){a[d]=e}});return a},_events:{keydown:function(a){if(this._start(a)&&this._keydown(a)){a.preventDefault()}},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();if(this.previous!==this.element.val()){this._trigger("onChange",a)
}},mousewheel:function(a,b){if(!b){return}if(!this.spinning&&!this._start(a)){return false}this._spin((b>0?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning){this._stop(a)}},100);a.preventDefault()},"mousedown .coral-spinner-button":function(b){var a;a=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function c(){var d=this.element[0]===this.document[0].activeElement;if(!d){this.element.focus();this.previous=a;this._delay(function(){this.previous=a})}}b.preventDefault();c.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;c.call(this)});if(this._start(b)===false){return}this._repeat(null,$(b.currentTarget).hasClass("coral-spinner-up")?1:-1,b)},"mouseup .coral-spinner-button":"_stop","mouseenter .coral-spinner-button":function(a){if(!$(a.currentTarget).hasClass("coral-state-active")){return}if(this._start(a)===false){return false}this._repeat(null,$(a.currentTarget).hasClass("coral-spinner-up")?1:-1,a)},"mouseleave .coral-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("coral-spinner-input coral-textbox-default").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=a.find(".coral-spinner-button").attr("tabIndex",-1).button().removeClass("coral-corner-all");if(this.buttons.height()>Math.ceil(a.height()*0.5)&&a.height()>0){a.height(a.height())}if(this.options.disabled){this.disable()}},_keydown:function(b){var a=this.options,c=$.coral.keyCode;switch(b.keyCode){case c.UP:this._repeat(null,1,b);return true;case c.DOWN:this._repeat(null,-1,b);return true;case c.PAGE_UP:this._repeat(null,a.page,b);return true;case c.PAGE_DOWN:this._repeat(null,-a.page,b);return true}return false},_uiSpinnerHtml:function(){return"<span class='coral-spinner coral-component'><span class='coral-textbox-border coral-corner-all'></span></span>"
},_buttonHtml:function(){return"<a class='coral-spinner-button coral-spinner-up coral-corner-tr'><span class='icon "+this.options.icons.up+"'>&#9650;</span></a><a class='coral-spinner-button coral-spinner-down coral-corner-br'><span class='icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){if(!this.spinning&&this._trigger("onStart",a)===false){return false}if(!this.counter){this.counter=1}this.spinning=true;return true},_repeat:function(b,a,c){b=b||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,a,c)},b);this._spin(a*this.options.step,c)},_spin:function(b,a){var c=this.value()||0;if(!this.counter){this.counter=1}c=this._adjustValue(c+b*this._increment(this.counter));if(!this.spinning||this._trigger("onSpin",a,{value:c})!==false){this._value(c);this.counter++}},_increment:function(a){var b=this.options.incremental;if(b){return $.isFunction(b)?b(a):Math.floor(a*a*a/50000-a*a/500+17*a/200+1)}return 1},_precision:function(){var a=this._precisionOf(this.options.step);if(this.options.min!==null){a=Math.max(a,this._precisionOf(this.options.min))}return a},_precisionOf:function(b){var c=b.toString(),a=c.indexOf(".");return a===-1?0:c.length-a-1},_adjustValue:function(c){var b,d,a=this.options;b=a.min!==null?a.min:0;d=c-b;d=Math.round(d/a.step)*a.step;c=b+d;c=parseFloat(c.toFixed(this._precision()));if(a.max!==null&&c>a.max){return a.max}if(a.min!==null&&c<a.min){return a.min}return c},_stop:function(a){if(!this.spinning){return}clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("onStop",a)},_setOption:function(a,b){if(a==="value"){if(typeof b!=="undefined"){this.value(b)}else{this.value()}}if(a==="culture"||a==="numberFormat"){var c=this._parse(this.element.val());this.options[a]=b;this.element.val(this._format(c));return}if(a==="max"||a==="min"||a==="step"){if(typeof b==="string"){b=this._parse(b)}}if(a==="icons"){this.buttons.first().find(".coral-icon").removeClass(this.options.icons.up).addClass(b.up);
this.buttons.last().find(".coral-icon").removeClass(this.options.icons.down).addClass(b.down)}this._super(a,b);if(a==="disabled"){this.component().toggleClass("coral-state-disabled",!!b);this.element.prop("disabled",!!b);this.buttons.button(b?"disable":"enable")}},_setOptions:spinner_modifier(function(a){this._super(a)}),_parse:function(a){if(typeof a==="string"&&a!==""){a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a}return a===""||isNaN(a)?null:a},_format:function(a){if(a===""){return""}return window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();if(a===null){return false}return a===this._adjustValue(a)},_value:function(c,a){var b;if(c!==""){b=this._parse(c);if(b!==null){if(!a){b=this._adjustValue(b)}c=this._format(b)}}this.element.val(c);this._refresh()},_destroy:function(){this.element.removeClass("coral-spinner-input").removeClass("coral-textbox-default").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.component().replaceWith(this.element)},reset:function(){this.setValue(this.originalValue)},stepUp:spinner_modifier(function(a){this._stepUp(a)}),_stepUp:function(a){if(this._start()){this._spin((a||1)*this.options.step);this._stop()}},stepDown:spinner_modifier(function(a){this._stepDown(a)}),_stepDown:function(a){if(this._start()){this._spin((a||1)*-this.options.step);this._stop()}},pageUp:spinner_modifier(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:spinner_modifier(function(a){this._stepDown((a||1)*this.options.page)}),setValue:function(a){this.value(a)},getValue:function(a){return this.value()+""},value:function(a){if(!arguments.length){return this._parse(this.element.val())
}spinner_modifier(this._value).call(this,a)},component:function(){return this.uiSpinner.parent()}});