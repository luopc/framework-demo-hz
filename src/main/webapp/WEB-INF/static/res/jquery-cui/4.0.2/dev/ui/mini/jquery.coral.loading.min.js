(function(d,f,g,a){var e="loading",c={position:"overlay",text:"",loadingIcon:"coral-icon-loading",tpl:'<span class="loading-wrapper {wrapper}">{text}<span class="{loadingIcon}"></span></span>',disableSource:false,disableOthers:[]};function h(k,j){this.element=k;this.options=d.extend({},c,j);this._defaults=c;this._name=e;this._loader=null;this.init()}function b(){if(!d[e]){d.loading=function(j){d("body").loading(j)}}}h.prototype={init:function(){if(d(this.element).is("body")){this.options.position="overlay"}this.show()},show:function(){var l=this,m=l.options.tpl.replace("{wrapper}"," loading-show ");m=m.replace("{loadingIcon}",l.options.loadingIcon);m=m.replace("{text}",(l.options.text!=="")?l.options.text+" ":"");l._loader=d(m);if(d(l.element).is("input, textarea")&&true===l.options.disableSource){d(l.element).attr("disabled","disabled")}else{if(true===l.options.disableSource){d(l.element).addClass("disabled")}}switch(l.options.position){case"inside":d(l.element).append(l._loader);break;case"overlay":var k=null;if(d(l.element).is("body")){k=d('<div class="coral-loading" style="position:fixed; left:0; top:0; z-index: 10001; width: 100%; height: '+d(f).height()+'px;" />');k.prepend("<div class ='coral-component-overlay'/>");d("body").prepend(k)}else{var o=d(l.element).css("position"),p={},j=d(l.element).outerHeight()+"px",n="100%";if("relative"===o||"absolute"===o){p={top:0,left:0}}else{p=d(l.element).position()}k=d('<div class="coral-loading" style="position:absolute; top: '+p.top+"px; left: "+p.left+"px; z-index: 10000; width: "+n+"; height: "+j+';" />');k.prepend("<div style='position:absolute;width:100%;height:100%;'><div class ='coral-component-overlay'style='position:relative;'></div></div>");d(l.element).prepend(k)}k.append(l._loader);l._loader.css({top:(k.outerHeight()/2-l._loader.outerHeight()/2)+"px"});break;default:d(l.element).after(l._loader);break}l.disableOthers()},refresh:function(){var k=null,l=this,n=d(l.element).css("position"),o={},j=d(l.element).outerHeight()+"px",m="100%";
if("relative"===n||"absolute"===n){o={top:0,left:0}}else{o=d(l.element).position()}k=d(l.element).find(".coral-loading");k.css({top:o.top,left:o.left,width:m,height:j});l._loader.css({top:(k.outerHeight()/2-l._loader.outerHeight()/2)+"px"})},hide:function(){if("overlay"===this.options.position){d(this.element).find(".coral-loading").first().remove()}else{d(this._loader).remove();d(this.element).text(d(this.element).attr("data-loading-label"))}d(this.element).removeAttr("disabled").removeClass("disabled");this.enableOthers()},disableOthers:function(){d.each(this.options.disableOthers,function(k,l){var j=d(l);if(j.is("button, input, textarea")){j.attr("disabled","disabled")}else{j.addClass("disabled")}})},enableOthers:function(){d.each(this.options.disableOthers,function(k,l){var j=d(l);if(j.is("button, input, textarea")){j.removeAttr("disabled")}else{j.removeClass("disabled")}})}};var i=Array.prototype.slice;d.fn[e]=function(l){var m=this,k=i.call(arguments,1),j=typeof l==="string";return this.each(function(){if(j){if(d.data(this,"plugin_"+e)){var o,n=d.data(this,"plugin_"+e);if(!d.isFunction(n[l])||l.charAt(0)==="_"){return d.error("no such method '"+l+"' for "+name+" component instance")}o=n[l].apply(n,k);if(o!==n&&o!==a){m=o&&o.jquery?m.pushStack(o.get()):o;return false}}}else{d.data(this,"plugin_"+e,new h(this,l))}})};b()})(jQuery,window,document);