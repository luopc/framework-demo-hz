/*!
 * 组件库4.0：下拉树按钮
 * 
 * 依赖JS文件：
 *    jquery.coral.core.js
 *    jquery.coral.component.js
 */
(function(a,b){a.component("coral.treebutton",a.coral.button,{version:a.coral.version,castProperties:["treeOptions"],options:{id:null,name:null,label:null,cls:null,position:{my:"left top",at:"left bottom",collision:"none"},width:null,text:true,disabled:false,multiple:false,treeOptions:{id:null,name:null,data:null,showLine:false,showIcon:false,checkable:true},onCreate:null,onClick:null,onCheck:null,onSelect:null},tree:function(){return this.uiTree},_create:function(){var c=this;this._super();this._initElements()},_initElements:function(){var e=this,d=this.options,f=this.options.treeOptions;this.element.addClass("coral-treebutton-element").uniqueId();this.uiTree=a("<ul>").attr("id",a(this.element).attr("id")+"_tree").addClass("coral-treebutton-panel coral-front").appendTo("body");this.element.on("click",function(h,g){e._showtree()});this._on(this.document,{mousedown:function(g){if(g.isDefaultPrevented()){return}e._hidetree()}});this.uiTree.unbind().bind("mousedown",function(g){g.preventDefault()});var c={checkable:this.options.multiple};f=a.extend({},c,d.treeOptions,{id:a(this.element).attr("id")+"_tree"});this.uiTree.tree(f)},_bindEvents:function(){},_setOption:function(c,e){var d=this;this._super(c,e)},_showtree:function(d){var f=this.uiTree;f.show();var c=f.siblings(".coral-front:visible").map(function(){return +a(this).css("z-index")}).get(),e=Math.max.apply(null,c);if(e>=+f.css("z-index")){f.css("z-index",e+1)}f.position(a.extend({of:this.element},this.options.position))},_hidetree:function(){this.uiTree.hide()},disabledNode:function(f){var d=this.uiTree.tree("getNodesByParam","id",f);for(var e=0,c=d.length;e<c;e++){this.uiTree.tree("setChkDisabled",d[0],true)}},undisabledNode:function(f){var d=this.uiTree.tree("getNodesByParam","id",f);for(var e=0,c=d.length;e<c;e++){this.uiTree.tree("setChkDisabled",d[0],false)}},_destroy:function(){this.uiTree.remove();this.element.removeClass("ctrl-init ctrl-init-treebutton coral-treebutton-element")
}})})(jQuery);