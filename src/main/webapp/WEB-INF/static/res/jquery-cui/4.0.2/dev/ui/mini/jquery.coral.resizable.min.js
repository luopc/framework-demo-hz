/*!
 * jQuery coral Resizable 4.0.1
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.component.js
 */
(function(d,e){function b(f){return parseInt(f,10)||0}function a(f){return !isNaN(parseInt(f,10))}function c(i,g){if(d(i).css("overflow")==="hidden"){return false}var f=(g&&g==="left")?"scrollLeft":"scrollTop",h=false;if(i[f]>0){return true}i[f]=1;h=(i[f]>0);i[f]=0;return h}d.component("coral.resizable",d.coral.mouse,{version:"4.0.1",componentEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,layout:false,helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var m,g,k,h,f,j=this,l=this.options;this.element.addClass("coral-resizable");d.extend(this,{_aspectRatio:!!(l.aspectRatio),aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"coral-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap(d("<div class='coral-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("coral-resizable",this.element.data("coral-resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));
this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=l.handles||(!d(".coral-resizable-handle",this.element).length?"e,s,se":{n:".coral-resizable-n",e:".coral-resizable-e",s:".coral-resizable-s",w:".coral-resizable-w",se:".coral-resizable-se",sw:".coral-resizable-sw",ne:".coral-resizable-ne",nw:".coral-resizable-nw"});if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}m=this.handles.split(",");this.handles={};for(g=0;g<m.length;g++){k=d.trim(m[g]);f="coral-resizable-"+k;h=d("<div class='coral-resizable-handle "+f+"'></div>");h.css({zIndex:l.zIndex});if("se"===k){h.addClass("coral-icon coral-icon-gripsmall-diagonal-se")}this.handles[k]=".coral-resizable-"+k;this.element.append(h)}}this._renderAxis=function(r){var o,p,n,q;r=r||this.element;for(o in this.handles){if(this.handles[o].constructor===String){this.handles[o]=this.element.children(this.handles[o]).first().show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){p=d(this.handles[o],this.element);q=/sw|ne|nw|se|n|s/.test(o)?p.outerHeight():p.outerWidth();n=["padding",/ne|nw|n/.test(o)?"Top":/se|sw|s/.test(o)?"Bottom":/^e$/.test(o)?"Right":"Left"].join("");r.css(n,q);this._proportionallyResize()}if(!d(this.handles[o]).length){continue}}};this._renderAxis(this.element);this._handles=d(".coral-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!j.resizing){if(this.className){h=this.className.match(/coral-resizable-(se|sw|ne|nw|n|e|s|w)/i)}j.axis=h&&h[1]?h[1]:"se"}});if(l.autoHide){this._handles.hide();d(this.element).addClass("coral-resizable-autohide").mouseenter(function(){if(l.disabled){return}d(this).removeClass("coral-resizable-autohide");j._handles.show()}).mouseleave(function(){if(l.disabled){return}if(!j.resizing){d(this).addClass("coral-resizable-autohide");j._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();
var g,f=function(h){d(h).removeClass("coral-resizable coral-resizable-disabled coral-resizable-resizing").removeData("resizable").removeData("coral-resizable").unbind(".resizable").find(".coral-resizable-handle").remove()};if(this.elementIsWrapper){f(this.element);g=this.element;this.originalElement.css({position:g.css("position"),width:g.outerWidth(),height:g.outerHeight(),top:g.css("top"),left:g.css("left")}).insertAfter(g);g.remove()}this.originalElement.css("resize",this.originalResizeStyle);f(this.originalElement);return this},_mouseCapture:function(h){var g,j,f=false;for(g in this.handles){j=d(this.handles[g])[0];if(j===h.target||d.contains(j,h.target)){f=true}}return !this.options.disabled&&f},_mouseStart:function(g){var k,h,j,i=this.options,f=this.element;this.resizing=true;this._renderProxy();k=b(this.helper.css("left"));h=b(this.helper.css("top"));if(i.containment){k+=d(i.containment).scrollLeft()||0;h+=d(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:k,top:h};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:f.width(),height:f.height()};this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()};this.originalPosition={left:k,top:h};this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio=(typeof i.aspectRatio==="number")?i.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);j=d(".coral-resizable-"+this.axis).css("cursor");d("body").css("cursor",j==="auto"?this.axis+"-resize":j);f.addClass("coral-resizable-resizing");this._propagate("start",g);return true},_mouseDrag:function(k){var l,j,m=this.originalMousePosition,g=this.axis,h=(k.pageX-m.left)||0,f=(k.pageY-m.top)||0,i=this._change[g];this._updatePrevProperties();if(!i){return false}l=i.apply(this,[k,h,f]);this._updateVirtualBoundaries(k.shiftKey);if(this._aspectRatio||k.shiftKey){l=this._updateRatio(l,k)
}l=this._respectSize(l,k);this._updateCache(l);this._propagate("resize",k);j=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!d.isEmptyObject(j)){this._updatePrevProperties();this._trigger("resize",k,this.ui());this._applyChanges()}return false},_mouseStop:function(i){this.resizing=false;var h,f,g,l,p,k,n,j=this.options,m=this;if(this._helper){h=this._proportionallyResizeElements;f=h.length&&(/textarea/i).test(h[0].nodeName);g=f&&c(h[0],"left")?0:m.sizeDiff.height;l=f?0:m.sizeDiff.width;p={width:(m.helper.width()-l),height:(m.helper.height()-g)};k=(parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left))||null;n=(parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top))||null;if(!j.animate){this.element.css(d.extend(p,{top:n,left:k}))}m.helper.height(m.size.height);m.helper.width(m.size.width);if(this._helper&&!j.animate){this._proportionallyResize()}}d("body").css("cursor","auto");this.element.removeClass("coral-resizable-resizing");this._propagate("stop",i,this.ui());if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var f={};if(this.position.top!==this.prevPosition.top){f.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){f.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){f.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){f.height=this.size.height+"px"}this.helper.css(f);return f},_updateVirtualBoundaries:function(h){var j,i,g,l,f,k=this.options;f={minWidth:a(k.minWidth)?k.minWidth:0,maxWidth:a(k.maxWidth)?k.maxWidth:Infinity,minHeight:a(k.minHeight)?k.minHeight:0,maxHeight:a(k.maxHeight)?k.maxHeight:Infinity};if(this._aspectRatio||h){j=f.minHeight*this.aspectRatio;g=f.minWidth/this.aspectRatio;i=f.maxHeight*this.aspectRatio;
l=f.maxWidth/this.aspectRatio;if(j>f.minWidth){f.minWidth=j}if(g>f.minHeight){f.minHeight=g}if(i<f.maxWidth){f.maxWidth=i}if(l<f.maxHeight){f.maxHeight=l}}this._vBoundaries=f},_updateCache:function(f){this.offset=this.helper.offset();if(a(f.left)){this.position.left=f.left}if(a(f.top)){this.position.top=f.top}if(a(f.height)){this.size.height=f.height}if(a(f.width)){this.size.width=f.width}},_updateRatio:function(h){var i=this.position,g=this.size,f=this.axis;if(a(h.height)){h.width=(h.height*this.aspectRatio)}else{if(a(h.width)){h.height=(h.width/this.aspectRatio)}}if(f==="sw"){h.left=i.left+(g.width-h.width);h.top=null}if(f==="nw"){h.top=i.top+(g.height-h.height);h.left=i.left+(g.width-h.width)}return h},_respectSize:function(k){var h=this._vBoundaries,n=this.axis,q=a(k.width)&&h.maxWidth&&(h.maxWidth<k.width),l=a(k.height)&&h.maxHeight&&(h.maxHeight<k.height),i=a(k.width)&&h.minWidth&&(h.minWidth>k.width),p=a(k.height)&&h.minHeight&&(h.minHeight>k.height),g=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,j=/sw|nw|w/.test(n),f=/nw|ne|n/.test(n);if(i){k.width=h.minWidth}if(p){k.height=h.minHeight}if(q){k.width=h.maxWidth}if(l){k.height=h.maxHeight}if(i&&j){k.left=g-h.minWidth}if(q&&j){k.left=g-h.maxWidth}if(p&&f){k.top=m-h.minHeight}if(l&&f){k.top=m-h.maxHeight}if(!k.width&&!k.height&&!k.left&&k.top){k.top=null}else{if(!k.width&&!k.height&&!k.top&&k.left){k.left=null}}return k},_getPaddingPlusBorderDimensions:function(h){var g=0,j=[],k=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")],f=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")];for(;g<4;g++){j[g]=(parseInt(k[g],10)||0);j[g]+=(parseInt(f[g],10)||0)}return{height:j[0]+j[2],width:j[1]+j[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var h,g=0,f=this.helper||this.element;for(;g<this._proportionallyResizeElements.length;g++){h=this._proportionallyResizeElements[g];
if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(h)}h.css({height:(f.height()-this.outerDimensions.height)||0,width:(f.width()-this.outerDimensions.width)||0})}},_renderProxy:function(){var f=this.element,g=this.options;this.elementOffset=f.offset();if(this._helper){this.helper=this.helper||d("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++g.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(g,f){return{width:this.originalSize.width+f}},w:function(h,f){var g=this.originalSize,i=this.originalPosition;return{left:i.left+f,width:g.width-f}},n:function(i,g,f){var h=this.originalSize,j=this.originalPosition;return{top:j.top+f,height:h.height-f}},s:function(h,g,f){return{height:this.originalSize.height+f}},se:function(h,g,f){return d.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[h,g,f]))},sw:function(h,g,f){return d.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[h,g,f]))},ne:function(h,g,f){return d.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[h,g,f]))},nw:function(h,g,f){return d.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[h,g,f]))}},_propagate:function(g,f){d.coral.plugin.call(this,g,[f,this.ui()]);(g!=="resize"&&this._trigger(g,f,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});d.coral.plugin.add("resizable","animate",{stop:function(i){var n=d(this).data("coral-resizable"),k=n.options,h=n._proportionallyResizeElements,f=h.length&&(/textarea/i).test(h[0].nodeName),g=f&&c(h[0],"left")?0:n.sizeDiff.height,m=f?0:n.sizeDiff.width,j={width:(n.size.width-m),height:(n.size.height-g)},l=(parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left))||null,p=(parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top))||null;
n.element.animate(d.extend(j,p&&l?{top:p,left:l}:{}),{duration:k.animateDuration,easing:k.animateEasing,step:function(){var o={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};if(h&&h.length){d(h[0]).css({width:o.width,height:o.height})}n._updateCache(o);n._propagate("resize",i)}})}});d.coral.plugin.add("resizable","containment",{start:function(){var n,h,r,f,m,i,s,q=d(this).data("coral-resizable"),l=q.options,k=q.element,g=l.containment,j=(g instanceof d)?g.get(0):(/parent/.test(g))?k.parent().get(0):g;if(!j){return}q.containerElement=d(j);if(/document/.test(g)||g===document){q.containerOffset={left:0,top:0};q.containerPosition={left:0,top:0};q.parentData={element:d(document),left:0,top:0,width:d(document).width(),height:d(document).height()||document.body.parentNode.scrollHeight}}else{n=d(j);h=[];d(["Top","Right","Left","Bottom"]).each(function(p,o){h[p]=b(n.css("padding"+o))});q.containerOffset=n.offset();q.containerPosition=n.position();q.containerSize={height:(n.innerHeight()-h[3]),width:(n.innerWidth()-h[1])};r=q.containerOffset;f=q.containerSize.height;m=q.containerSize.width;i=(c(j,"left")?j.scrollWidth:m);s=(c(j)?j.scrollHeight:f);q.parentData={element:j,left:r.left,top:r.top,width:i,height:s}}},resize:function(g){var m,s,l,j,n=d(this).resizable("instance"),i=n.options,q=n.containerOffset,p=n.position,r=n._aspectRatio||g.shiftKey,f={top:0,left:0},h=n.containerElement,k=true;if(h[0]!==document&&(/static/).test(h.css("position"))){f=q}if(p.left<(n._helper?q.left:0)){n.size.width=n.size.width+(n._helper?(n.position.left-q.left):(n.position.left-f.left));if(r){n.size.height=n.size.width/n.aspectRatio;k=false}n.position.left=i.helper?q.left:0}if(p.top<(n._helper?q.top:0)){n.size.height=n.size.height+(n._helper?(n.position.top-q.top):n.position.top);if(r){n.size.width=n.size.height*n.aspectRatio;k=false}n.position.top=n._helper?q.top:0}l=n.containerElement.get(0)===n.element.parent().get(0);
j=/relative|absolute/.test(n.containerElement.css("position"));if(l&&j){n.offset.left=n.parentData.left+n.position.left;n.offset.top=n.parentData.top+n.position.top}else{n.offset.left=n.element.offset().left;n.offset.top=n.element.offset().top}m=Math.abs(n.sizeDiff.width+(n._helper?n.offset.left-f.left:(n.offset.left-q.left)));s=Math.abs(n.sizeDiff.height+(n._helper?n.offset.top-f.top:(n.offset.top-q.top)));if(m+n.size.width>=n.parentData.width){n.size.width=n.parentData.width-m;if(r){n.size.height=n.size.width/n.aspectRatio;k=false}}if(s+n.size.height>=n.parentData.height){n.size.height=n.parentData.height-s;if(r){n.size.width=n.size.height*n.aspectRatio;k=false}}if(!k){n.position.left=n.prevPosition.left;n.position.top=n.prevPosition.top;n.size.width=n.prevSize.width;n.size.height=n.prevSize.height}},stop:function(){var l=d(this).resizable("instance"),g=l.options,m=l.containerOffset,f=l.containerPosition,i=l.containerElement,j=d(l.helper),p=j.offset(),n=j.outerWidth()-l.sizeDiff.width,k=j.outerHeight()-l.sizeDiff.height;if(l._helper&&!g.animate&&(/relative/).test(i.css("position"))){d(this).css({left:p.left-f.left-m.left,width:n,height:k})}if(l._helper&&!g.animate&&(/static/).test(i.css("position"))){d(this).css({left:p.left-f.left-m.left,width:n,height:k})}}});d.coral.plugin.add("resizable","alsoResize",{start:function(){var f=d(this).data("coral-resizable"),h=f.options,g=function(i){d(i).each(function(){var j=d(this);j.data("coral-resizable-alsoresize",{width:parseInt(j.width(),10),height:parseInt(j.height(),10),left:parseInt(j.css("left"),10),top:parseInt(j.css("top"),10)})})};if(typeof(h.alsoResize)==="object"&&!h.alsoResize.parentNode){if(h.alsoResize.length){h.alsoResize=h.alsoResize[0];g(h.alsoResize)}else{d.each(h.alsoResize,function(i){g(i)})}}else{g(h.alsoResize)}},resize:function(h,j){var g=d(this).data("coral-resizable"),k=g.options,i=g.originalSize,m=g.originalPosition,l={height:(g.size.height-i.height)||0,width:(g.size.width-i.width)||0,top:(g.position.top-m.top)||0,left:(g.position.left-m.left)||0},f=function(n,o){d(n).each(function(){var r=d(this),u=d(this).data("coral-resizable-alsoresize"),q={},p=o&&o.length?o:r.parents(j.originalElement[0]).length?["width","height"]:["width","height","top","left"];
var s=d.coral.getStyles(r[0]);var t=jQuery.support.boxSizing&&jQuery.css(r,"boxSizing",false,s)==="border-box";d.each(p,function(v,x){var w=(u[x]||0)+(l[x]||0);if(w&&w>=0){if(t){if(d.inArray(x,["width","height"])>=0){r[x](w)}else{r.css(x,w)}}else{q[x]=w||null}}});r.css(q)})};if(typeof(k.alsoResize)==="object"&&!k.alsoResize.nodeType){d.each(k.alsoResize,function(n,o){f(n,o)})}else{f(k.alsoResize)}},stop:function(){d(this).removeData("resizable-alsoresize")}});d.coral.plugin.add("resizable","ghost",{start:function(){var g=d(this).data("coral-resizable"),h=g.options,f=g.size;g.ghost=g.originalElement.clone();g.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("coral-resizable-ghost").addClass(typeof h.ghost==="string"?h.ghost:"");g.ghost.appendTo(g.helper)},resize:function(){var f=d(this).data("coral-resizable");if(f.ghost){f.ghost.css({position:"relative",height:f.size.height,width:f.size.width})}},stop:function(){var f=d(this).data("coral-resizable");if(f.ghost&&f.helper){f.helper.get(0).removeChild(f.ghost.get(0))}}});d.coral.plugin.add("resizable","grid",{resize:function(){var i,n=d(this).resizable("instance"),s=n.options,l=n.size,m=n.originalSize,p=n.originalPosition,x=n.axis,f=typeof s.grid==="number"?[s.grid,s.grid]:s.grid,v=(f[0]||1),u=(f[1]||1),k=Math.round((l.width-m.width)/v)*v,j=Math.round((l.height-m.height)/u)*u,q=m.width+k,t=m.height+j,h=s.maxWidth&&(s.maxWidth<q),r=s.maxHeight&&(s.maxHeight<t),w=s.minWidth&&(s.minWidth>q),g=s.minHeight&&(s.minHeight>t);s.grid=f;if(w){q+=v}if(g){t+=u}if(h){q-=v}if(r){t-=u}if(/^(se|s|e)$/.test(x)){n.size.width=q;n.size.height=t}else{if(/^(ne)$/.test(x)){n.size.width=q;n.size.height=t;n.position.top=p.top-j}else{if(/^(sw)$/.test(x)){n.size.width=q;n.size.height=t;n.position.left=p.left-k}else{if(t-u<=0||q-v<=0){i=n._getPaddingPlusBorderDimensions(this)}if(t-u>0){n.size.height=t;n.position.top=p.top-j}else{t=u-i.height;n.size.height=t;n.position.top=p.top+m.height-t
}if(q-v>0){n.size.width=q;n.position.left=p.left-k}else{q=u-i.height;n.size.width=q;n.position.left=p.left+m.width-q}}}}}})})(jQuery);