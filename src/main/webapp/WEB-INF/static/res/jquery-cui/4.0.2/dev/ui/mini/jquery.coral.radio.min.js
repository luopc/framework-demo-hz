(function(a){a.component("coral.radio",a.coral.formelement,{version:"4.0.1",castProperties:["triggers"],options:{showStar:true,id:null,name:null,width:"auto",height:24,label:"",starBefore:false,labelField:null,disabled:false,readonly:false,allowCancel:false,checked:false,required:false,isCheck:false,value:"",errMsg:null,errMsgPosition:"leftBottom",onValidError:null,onValidSuccess:null,onClick:null,onKeyDown:null,onChange:a.noop,triggers:null,excluded:false},_create:function(){var d=this,c=this.options;if(!d.element.jquery){d.element=a(d.element)}d.element.addClass("coral-form-element-radio");d.element.addClass("coral-validation-radio");typeof d.element.attr("id")=="undefined"&&!!d.options.id&&d.element.attr("id",d.options.id);d.options.id=d.element.uniqueId().attr("id");var b=d.element.attr("name");typeof b!="undefined"?(d.options.name=b):(d.element.attr("name",d.options.name));if(a.trim(d.element.val())!=""&&a.trim(d.element.val())!="on"){d.options.value=d.element.val()}else{if(d.options.value){d.element.val(d.options.value)}}d.nameMark="coral-radio-element-"+d._hashCode(d.options.name);d.element.addClass(d.nameMark);d.uiRadio=a('<span class="coral-radio"></span>');d.uiLabel=a('<label class="coral-radio-label" for='+d.options.id+"></label>");d.uiIcon=a('<span class="coral-radio-icon"></span>');d.uiLabel.append(d.uiIcon);if(d.options.label){d.uiLabel.append(d.options.label)}if(d.options.checked){d._getRadios().not(d.element).radio("uncheck");d.uiIcon.addClass("cui-icon-radio-checked coral-radio-hightlight");d.element.prop("checked",true)}else{d.uiIcon.addClass("cui-icon-radio-unchecked");d.element.prop("checked",false)}d.element.after(d.uiRadio);d.uiRadio.append(d.element).append(d.uiLabel);if(c.labelField){this.uiLabelField=a('<label class="coral-label">'+c.labelField+"</label>");this.uiRadio.prepend(this.uiLabelField);this.uiRadio.addClass("coral-hasLabel")}if((d.element)[0].checked===true){d.originalValue=this.getValue()}d._bindEvent()},reset:function(){if(this.originalValue==="off"||this.originalValue===""){this.uncheck()
}else{this.check()}},_getRadios:function(){var c=this,b=c.element.closest("form");if(b.length>0){return b.find(a("."+c.nameMark))}else{return a("."+c.nameMark)}},_setDisabled:function(b){if(b){this.element.prop("disabled",true);this.uiRadio.addClass("coral-state-disabled")}else{this.element.prop("disabled",false);this.uiRadio.removeClass("coral-state-disabled")}this.options.disabled=(b?true:false)},_setReadonly:function(b){if(b){this.element.prop("reaonly",true);this.uiRadio.addClass("coral-readonly")}else{this.element.prop("readonly",false);this.uiRadio.removeClass("coral-state-readonly")}this.options.readonly=!!b},focus:function(){var b=this;if(this.options.disabled||this.options.readonly){return false}this.element.focus();return true},_bindEvent:function(){var c=this;if(this.options.disabled){this._setDisabled(this.options.disabled)}var b;this.element.bind("focus",function(){c.uiRadio.addClass("coral-radio-highlight")}).bind("blur",function(){c.uiRadio.removeClass("coral-radio-highlight")}).bind("click",function(d){if(c.options.disabled){return}c._trigger("onClick",null,{checked:!!c.element.prop("checked")});if(b){b=false;return false}}).bind("keydown"+this.eventNamespace,function(d){c._trigger("onKeyDown",d,{})});this.uiRadio.bind("mouseenter"+this.eventNamespace,function(){if(c.options.disabled){return}a(this).addClass("coral-radio-hover")}).bind("mouseleave"+this.eventNamespace,function(){if(c.options.disabled){return}a(this).removeClass("coral-radio-hover")});this.uiLabel.bind("click",function(d){if(c.options.readonly||c.options.disabled){return false}b=true;c.options.isCheck=a(c.element).prop("checked");if(!c.options.isCheck){c._clearCheckedState();c.uiIcon.removeClass("cui-icon-radio-unchecked");c.uiIcon.addClass("cui-icon-radio-checked coral-radio-hightlight");c.element.prop("checked",true);c._trigger("onChange",null,[{checked:!!c.element.prop("checked")}])}else{if(!c.options.allowCancel){d.preventDefault();return false}c._clearCheckedState();c.uiIcon.addClass("cui-icon-radio-unchecked");
c.element.prop("checked",false);c._trigger("onChange",null,[{checked:!!c.element.prop("checked")}])}})},clear:function(){},_clearCheckedState:function(){this._getRadios().each(function(){a(this).radio("component").find(".coral-radio-icon").removeClass("cui-icon-radio-checked coral-radio-hightlight").addClass(" cui-icon-radio-unchecked")})},_hashCode:function(f){if(!f){return 0}f=""+f;var d=0,e=0,b=f.length;for(var c=0;c<b;c++){d=31*d+f.charCodeAt(e++);if(d>2147483647||d<2147483648){d=d&4294967295}}return d},_setOption:function(b,c){if(b==="id"||b==="name"){return}if(b==="readonly"){this._setReadonly(c)}if(b==="disabled"){this._setDisabled(c)}this._super(b,c)},_destroy:function(){this.uiRadio.replaceWith(this.element);this.uncheck();this.element.removeClass("coral-form-element-radio");this.element.removeClass("coral-validation-radio");this.element.removeClass(this.nameMark)},component:function(){return this.uiRadio},disable:function(){this._setDisabled(true)},enable:function(){this._setDisabled(false)},show:function(){this.component().show()},hide:function(){this.component().hide()},check:function(){var b=this;if(this.uiIcon.hasClass("cui-icon-radio-unchecked")){b._getRadios().each(function(){a(this).radio("component").find(".coral-radio-icon").removeClass("cui-icon-radio-checked coral-radio-hightlight").addClass(" cui-icon-radio-unchecked")});this.uiIcon.removeClass("cui-icon-radio-unchecked").addClass("cui-icon-radio-checked coral-radio-hightlight");this.element.prop("checked",true)}},uncheck:function(){if(this.uiIcon.hasClass("coral-radio-hightlight")){this.uiIcon.removeClass("cui-icon-radio-checked coral-radio-hightlight").addClass("cui-icon-radio-unchecked");this.element.prop("checked",false)}},isChecked:function(){return this.element.prop("checked")},setValue:function(b){if("on"===b){this.check()}else{this.uncheck()}},getValue:function(){return this.getValues().join(",")},getValues:function(){var c=this,b=[];c._getRadios().each(function(){var d=a(this);if(d.radio("isChecked")){b.push(d.val())
}});return b},refresh:function(){this._destroy();this._create()}})})(jQuery);